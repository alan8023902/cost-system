# 快速启动指南

## 前提条件

- Node.js 18+
- npm 或 yarn
- 后端服务运行在 `http://localhost:31943`

## 启动步骤

### 1. 安装依赖 (如果还没安装)

```bash
cd cost-frontend-react
npm install
```

### 2. 启动开发服务器

```bash
npm run dev
```

服务器将在 `http://localhost:5173` 启动

### 3. 访问应用

打开浏览器访问: `http://localhost:5173`

默认会重定向到登录页面

### 4. 登录

使用测试账号登录:
- 用户名: `admin`
- 密码: (根据后端配置)

登录成功后会自动跳转到新的工作台页面

## 新功能测试流程

### 测试新工作台

1. **登录后自动进入工作台**
   - ✅ 应该看到项目和版本选择器
   - ✅ 应该看到统计卡片区域
   - ✅ 应该看到数据录入区域

2. **选择项目**
   - 点击"项目"下拉框
   - 选择一个项目
   - ✅ 版本列表应该自动加载

3. **选择版本**
   - 点击"版本"下拉框
   - 选择一个版本
   - ✅ 统计卡片应该显示数据
   - ✅ 数据表格应该加载

4. **切换标签页**
   - 点击"物资明细"/"分包明细"/"费用明细"
   - ✅ 表格数据应该切换

5. **测试操作按钮**
   - 点击"保存" - 应该显示成功提示
   - 点击"计算指标" - 应该更新统计卡片
   - 点击"提交审批" - 应该显示确认
   - 点击"导出报表" - 应该触发下载

### 测试导航

1. **侧边栏导航**
   - ✅ 工作台 (默认高亮)
   - ✅ 项目管理
   - ✅ 审批中心
   - ✅ 文件中心
   - ✅ 模板管理
   - ✅ 系统设置

2. **点击各个菜单项**
   - 应该正确跳转
   - 高亮状态应该更新

### 测试兼容性

1. **访问原有页面**
   - `/dashboard` - 系统总览
   - `/projects` - 项目列表
   - `/projects/:id` - 项目详情
   - ✅ 应该正常工作

2. **从原有页面跳转到新工作台**
   - 点击侧边栏"工作台"
   - ✅ 应该正确跳转

## 常见问题

### 1. 页面空白

**原因**: 可能是路由配置问题

**解决**:
- 检查浏览器控制台错误
- 确认 `App.tsx` 中的路由配置
- 刷新页面

### 2. 选择器不显示数据

**原因**: API 请求失败

**解决**:
- 检查后端服务是否运行
- 检查浏览器 Network 标签
- 确认 API 地址配置正确

### 3. 统计卡片显示 0

**原因**: 指标数据未加载或计算

**解决**:
- 点击"计算指标"按钮
- 检查版本是否有数据
- 查看控制台错误

### 4. 表格不显示数据

**原因**: 明细数据未加载

**解决**:
- 确认版本已选择
- 检查 API 请求
- 尝试切换标签页

## 性能检查

### 加载时间

- 首屏加载: < 2s
- 项目切换: < 500ms
- 版本切换: < 1s
- 标签页切换: < 300ms

### 内存使用

- 初始加载: < 50MB
- 运行中: < 100MB

## 浏览器兼容性

测试浏览器:
- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+

## 移动端测试

### 响应式断点

1. **移动端 (< 640px)**
   - 选择器全宽
   - 统计卡片 1 列
   - 按钮全宽

2. **平板 (640px - 1024px)**
   - 选择器固定宽度
   - 统计卡片 2 列
   - 按钮自动宽度

3. **桌面 (> 1024px)**
   - 选择器固定宽度
   - 统计卡片 4 列
   - 按钮自动宽度

## 调试技巧

### 1. 查看 React DevTools

安装 React DevTools 浏览器扩展

查看组件状态:
- `NewWorkbench` 组件
- `selectedProjectId`
- `selectedVersionId`
- `lineItems`
- `indicators`

### 2. 查看 Network 请求

打开浏览器开发者工具 → Network

检查 API 请求:
- `/api/projects` - 项目列表
- `/api/projects/:id/versions` - 版本列表
- `/api/versions/:id` - 版本详情
- `/api/versions/:id/indicators` - 指标数据
- `/api/versions/:id/line-items` - 明细数据

### 3. 查看 Console 日志

检查错误信息:
- API 错误
- 组件错误
- 路由错误

## 构建生产版本

### 1. 构建

```bash
npm run build
```

### 2. 预览

```bash
npm run preview
```

### 3. 部署

将 `dist` 目录部署到服务器

## 回滚方案

如果新版本有问题,可以快速回滚:

### 1. 修改默认路由

```typescript
// App.tsx
<Route path="/" element={<Navigate to="/dashboard" />} />
```

### 2. 隐藏工作台菜单

```typescript
// constants.tsx
export const GLOBAL_NAV_ITEMS = [
  // { id: 'workbench', label: '工作台', path: '/workbench' }, // 注释掉
  { id: 'dashboard', label: '系统总览', path: '/dashboard' },
  // ...
];
```

### 3. 重新构建

```bash
npm run build
```

## 反馈收集

### 用户反馈表单

收集以下信息:
1. 新工作台是否容易使用?
2. 项目/版本切换是否方便?
3. 统计卡片是否有用?
4. 操作按钮是否清晰?
5. 有什么改进建议?

### 性能数据

收集以下指标:
1. 完成任务的点击次数
2. 完成任务的时间
3. 错误操作次数
4. 用户满意度评分

## 联系支持

如有问题,请查看:
- `docs/Test-Report.md` - 测试报告
- `docs/UX-Implementation-Complete.md` - 实施文档
- `docs/UX-Optimization-Proposal.md` - 优化方案

---

**祝测试顺利!** 🚀
