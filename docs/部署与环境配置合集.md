# éƒ¨ç½²ä¸ç¯å¢ƒé…ç½®åˆé›†

> åˆå¹¶æ—¶é—´ï¼š2026-02-20
> æ¥æºæ–‡æ¡£ï¼š`Quick-Start-Guide.md`ã€`Docker-Deployment-Guide.md`ã€`Database-Initialization.md`ã€`Mavené…ç½®è¯´æ˜.md`ã€`Reactå‰ç«¯ä½¿ç”¨è¯´æ˜.md`ã€`å‰ç«¯éƒ¨ç½²è¯´æ˜.md`ã€`DEPLOYMENT.md`

> ç›®å½•æ›´æ–°ï¼šæ ¹ç›®å½•éƒ¨ç½²è„šæœ¬å·²å½’æ¡£åˆ° `tools/scripts/`ï¼ŒSQL è„šæœ¬å·²ç»Ÿä¸€åˆ° `tools/sql/`ã€‚



---


## æ¥æºï¼šQuick-Start-Guide.md

# å¿«é€Ÿå¯åŠ¨æŒ‡å—

## å‰ææ¡ä»¶

- Node.js 18+
- npm æˆ– yarn
- åç«¯æœåŠ¡è¿è¡Œåœ¨ `http://localhost:31943`

## å¯åŠ¨æ­¥éª¤

### 1. å®‰è£…ä¾èµ– (å¦‚æœè¿˜æ²¡å®‰è£…)

```bash
cd cost-frontend-react
npm install
```

### 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

æœåŠ¡å™¨å°†åœ¨ `http://localhost:5173` å¯åŠ¨

### 3. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®: `http://localhost:5173`

é»˜è®¤ä¼šé‡å®šå‘åˆ°ç™»å½•é¡µé¢

### 4. ç™»å½•

ä½¿ç”¨æµ‹è¯•è´¦å·ç™»å½•:
- ç”¨æˆ·å: `admin`
- å¯†ç : (æ ¹æ®åç«¯é…ç½®)

ç™»å½•æˆåŠŸåä¼šè‡ªåŠ¨è·³è½¬åˆ°æ–°çš„å·¥ä½œå°é¡µé¢

## æ–°åŠŸèƒ½æµ‹è¯•æµç¨‹

### æµ‹è¯•æ–°å·¥ä½œå°

1. **ç™»å½•åè‡ªåŠ¨è¿›å…¥å·¥ä½œå°**
   - âœ… åº”è¯¥çœ‹åˆ°é¡¹ç›®å’Œç‰ˆæœ¬é€‰æ‹©å™¨
   - âœ… åº”è¯¥çœ‹åˆ°ç»Ÿè®¡å¡ç‰‡åŒºåŸŸ
   - âœ… åº”è¯¥çœ‹åˆ°æ•°æ®å½•å…¥åŒºåŸŸ

2. **é€‰æ‹©é¡¹ç›®**
   - ç‚¹å‡»"é¡¹ç›®"ä¸‹æ‹‰æ¡†
   - é€‰æ‹©ä¸€ä¸ªé¡¹ç›®
   - âœ… ç‰ˆæœ¬åˆ—è¡¨åº”è¯¥è‡ªåŠ¨åŠ è½½

3. **é€‰æ‹©ç‰ˆæœ¬**
   - ç‚¹å‡»"ç‰ˆæœ¬"ä¸‹æ‹‰æ¡†
   - é€‰æ‹©ä¸€ä¸ªç‰ˆæœ¬
   - âœ… ç»Ÿè®¡å¡ç‰‡åº”è¯¥æ˜¾ç¤ºæ•°æ®
   - âœ… æ•°æ®è¡¨æ ¼åº”è¯¥åŠ è½½

4. **åˆ‡æ¢æ ‡ç­¾é¡µ**
   - ç‚¹å‡»"ç‰©èµ„æ˜ç»†"/"åˆ†åŒ…æ˜ç»†"/"è´¹ç”¨æ˜ç»†"
   - âœ… è¡¨æ ¼æ•°æ®åº”è¯¥åˆ‡æ¢

5. **æµ‹è¯•æ“ä½œæŒ‰é’®**
   - ç‚¹å‡»"ä¿å­˜" - åº”è¯¥æ˜¾ç¤ºæˆåŠŸæç¤º
   - ç‚¹å‡»"è®¡ç®—æŒ‡æ ‡" - åº”è¯¥æ›´æ–°ç»Ÿè®¡å¡ç‰‡
   - ç‚¹å‡»"æäº¤å®¡æ‰¹" - åº”è¯¥æ˜¾ç¤ºç¡®è®¤
   - ç‚¹å‡»"å¯¼å‡ºæŠ¥è¡¨" - åº”è¯¥è§¦å‘ä¸‹è½½

### æµ‹è¯•å¯¼èˆª

1. **ä¾§è¾¹æ å¯¼èˆª**
   - âœ… å·¥ä½œå° (é»˜è®¤é«˜äº®)
   - âœ… é¡¹ç›®ç®¡ç†
   - âœ… å®¡æ‰¹ä¸­å¿ƒ
   - âœ… æ–‡ä»¶ä¸­å¿ƒ
   - âœ… æ¨¡æ¿ç®¡ç†
   - âœ… ç³»ç»Ÿè®¾ç½®

2. **ç‚¹å‡»å„ä¸ªèœå•é¡¹**
   - åº”è¯¥æ­£ç¡®è·³è½¬
   - é«˜äº®çŠ¶æ€åº”è¯¥æ›´æ–°

### æµ‹è¯•å…¼å®¹æ€§

1. **è®¿é—®åŸæœ‰é¡µé¢**
   - `/dashboard` - ç³»ç»Ÿæ€»è§ˆ
   - `/projects` - é¡¹ç›®åˆ—è¡¨
   - `/projects/:id` - é¡¹ç›®è¯¦æƒ…
   - âœ… åº”è¯¥æ­£å¸¸å·¥ä½œ

2. **ä»åŸæœ‰é¡µé¢è·³è½¬åˆ°æ–°å·¥ä½œå°**
   - ç‚¹å‡»ä¾§è¾¹æ "å·¥ä½œå°"
   - âœ… åº”è¯¥æ­£ç¡®è·³è½¬

## å¸¸è§é—®é¢˜

### 1. é¡µé¢ç©ºç™½

**åŸå› **: å¯èƒ½æ˜¯è·¯ç”±é…ç½®é—®é¢˜

**è§£å†³**:
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯
- ç¡®è®¤ `App.tsx` ä¸­çš„è·¯ç”±é…ç½®
- åˆ·æ–°é¡µé¢

### 2. é€‰æ‹©å™¨ä¸æ˜¾ç¤ºæ•°æ®

**åŸå› **: API è¯·æ±‚å¤±è´¥

**è§£å†³**:
- æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦è¿è¡Œ
- æ£€æŸ¥æµè§ˆå™¨ Network æ ‡ç­¾
- ç¡®è®¤ API åœ°å€é…ç½®æ­£ç¡®

### 3. ç»Ÿè®¡å¡ç‰‡æ˜¾ç¤º 0

**åŸå› **: æŒ‡æ ‡æ•°æ®æœªåŠ è½½æˆ–è®¡ç®—

**è§£å†³**:
- ç‚¹å‡»"è®¡ç®—æŒ‡æ ‡"æŒ‰é’®
- æ£€æŸ¥ç‰ˆæœ¬æ˜¯å¦æœ‰æ•°æ®
- æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯

### 4. è¡¨æ ¼ä¸æ˜¾ç¤ºæ•°æ®

**åŸå› **: æ˜ç»†æ•°æ®æœªåŠ è½½

**è§£å†³**:
- ç¡®è®¤ç‰ˆæœ¬å·²é€‰æ‹©
- æ£€æŸ¥ API è¯·æ±‚
- å°è¯•åˆ‡æ¢æ ‡ç­¾é¡µ

## æ€§èƒ½æ£€æŸ¥

### åŠ è½½æ—¶é—´

- é¦–å±åŠ è½½: < 2s
- é¡¹ç›®åˆ‡æ¢: < 500ms
- ç‰ˆæœ¬åˆ‡æ¢: < 1s
- æ ‡ç­¾é¡µåˆ‡æ¢: < 300ms

### å†…å­˜ä½¿ç”¨

- åˆå§‹åŠ è½½: < 50MB
- è¿è¡Œä¸­: < 100MB

## æµè§ˆå™¨å…¼å®¹æ€§

æµ‹è¯•æµè§ˆå™¨:
- âœ… Chrome 90+
- âœ… Firefox 88+
- âœ… Safari 14+
- âœ… Edge 90+

## ç§»åŠ¨ç«¯æµ‹è¯•

### å“åº”å¼æ–­ç‚¹

1. **ç§»åŠ¨ç«¯ (< 640px)**
   - é€‰æ‹©å™¨å…¨å®½
   - ç»Ÿè®¡å¡ç‰‡ 1 åˆ—
   - æŒ‰é’®å…¨å®½

2. **å¹³æ¿ (640px - 1024px)**
   - é€‰æ‹©å™¨å›ºå®šå®½åº¦
   - ç»Ÿè®¡å¡ç‰‡ 2 åˆ—
   - æŒ‰é’®è‡ªåŠ¨å®½åº¦

3. **æ¡Œé¢ (> 1024px)**
   - é€‰æ‹©å™¨å›ºå®šå®½åº¦
   - ç»Ÿè®¡å¡ç‰‡ 4 åˆ—
   - æŒ‰é’®è‡ªåŠ¨å®½åº¦

## è°ƒè¯•æŠ€å·§

### 1. æŸ¥çœ‹ React DevTools

å®‰è£… React DevTools æµè§ˆå™¨æ‰©å±•

æŸ¥çœ‹ç»„ä»¶çŠ¶æ€:
- `NewWorkbench` ç»„ä»¶
- `selectedProjectId`
- `selectedVersionId`
- `lineItems`
- `indicators`

### 2. æŸ¥çœ‹ Network è¯·æ±‚

æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· â†’ Network

æ£€æŸ¥ API è¯·æ±‚:
- `/api/projects` - é¡¹ç›®åˆ—è¡¨
- `/api/projects/:id/versions` - ç‰ˆæœ¬åˆ—è¡¨
- `/api/versions/:id` - ç‰ˆæœ¬è¯¦æƒ…
- `/api/versions/:id/indicators` - æŒ‡æ ‡æ•°æ®
- `/api/versions/:id/line-items` - æ˜ç»†æ•°æ®

### 3. æŸ¥çœ‹ Console æ—¥å¿—

æ£€æŸ¥é”™è¯¯ä¿¡æ¯:
- API é”™è¯¯
- ç»„ä»¶é”™è¯¯
- è·¯ç”±é”™è¯¯

## æ„å»ºç”Ÿäº§ç‰ˆæœ¬

### 1. æ„å»º

```bash
npm run build
```

### 2. é¢„è§ˆ

```bash
npm run preview
```

### 3. éƒ¨ç½²

å°† `dist` ç›®å½•éƒ¨ç½²åˆ°æœåŠ¡å™¨

## å›æ»šæ–¹æ¡ˆ

å¦‚æœæ–°ç‰ˆæœ¬æœ‰é—®é¢˜,å¯ä»¥å¿«é€Ÿå›æ»š:

### 1. ä¿®æ”¹é»˜è®¤è·¯ç”±

```typescript
// App.tsx
<Route path="/" element={<Navigate to="/dashboard" />} />
```

### 2. éšè—å·¥ä½œå°èœå•

```typescript
// constants.tsx
export const GLOBAL_NAV_ITEMS = [
  // { id: 'workbench', label: 'å·¥ä½œå°', path: '/workbench' }, // æ³¨é‡Šæ‰
  { id: 'dashboard', label: 'ç³»ç»Ÿæ€»è§ˆ', path: '/dashboard' },
  // ...
];
```

### 3. é‡æ–°æ„å»º

```bash
npm run build
```

## åé¦ˆæ”¶é›†

### ç”¨æˆ·åé¦ˆè¡¨å•

æ”¶é›†ä»¥ä¸‹ä¿¡æ¯:
1. æ–°å·¥ä½œå°æ˜¯å¦å®¹æ˜“ä½¿ç”¨?
2. é¡¹ç›®/ç‰ˆæœ¬åˆ‡æ¢æ˜¯å¦æ–¹ä¾¿?
3. ç»Ÿè®¡å¡ç‰‡æ˜¯å¦æœ‰ç”¨?
4. æ“ä½œæŒ‰é’®æ˜¯å¦æ¸…æ™°?
5. æœ‰ä»€ä¹ˆæ”¹è¿›å»ºè®®?

### æ€§èƒ½æ•°æ®

æ”¶é›†ä»¥ä¸‹æŒ‡æ ‡:
1. å®Œæˆä»»åŠ¡çš„ç‚¹å‡»æ¬¡æ•°
2. å®Œæˆä»»åŠ¡çš„æ—¶é—´
3. é”™è¯¯æ“ä½œæ¬¡æ•°
4. ç”¨æˆ·æ»¡æ„åº¦è¯„åˆ†

## è”ç³»æ”¯æŒ

å¦‚æœ‰é—®é¢˜,è¯·æŸ¥çœ‹:
- `docs/Test-Report.md` - æµ‹è¯•æŠ¥å‘Š
- `docs/UX-Implementation-Complete.md` - å®æ–½æ–‡æ¡£
- `docs/UX-Optimization-Proposal.md` - ä¼˜åŒ–æ–¹æ¡ˆ

---

**ç¥æµ‹è¯•é¡ºåˆ©!** ğŸš€



---


## æ¥æºï¼šDocker-Deployment-Guide.md

# Docker éƒ¨ç½²æŒ‡å—

## æ¦‚è¿°

æœ¬ç³»ç»Ÿæ”¯æŒä½¿ç”¨ Docker å®¹å™¨åŒ–éƒ¨ç½²,åŒ…å«ä»¥ä¸‹æœåŠ¡:
- MySQL 8.0 (æ•°æ®åº“)
- Redis 7 (ç¼“å­˜)
- Spring Boot (åç«¯æœåŠ¡)
- React + Nginx (å‰ç«¯æœåŠ¡)

## å‰ææ¡ä»¶

### å¿…éœ€è½¯ä»¶

1. **Docker**
   - ç‰ˆæœ¬: 20.10+
   - ä¸‹è½½: https://www.docker.com/products/docker-desktop

2. **Docker Compose**
   - ç‰ˆæœ¬: 2.0+
   - é€šå¸¸éš Docker Desktop ä¸€èµ·å®‰è£…

### ç³»ç»Ÿè¦æ±‚

- CPU: 2æ ¸+
- å†…å­˜: 4GB+
- ç£ç›˜: 10GB+
- æ“ä½œç³»ç»Ÿ: Windows 10+, macOS 10.15+, Linux

## å¿«é€Ÿå¼€å§‹

### æ–¹å¼ 1: ä½¿ç”¨éƒ¨ç½²è„šæœ¬ (æ¨è)

#### Windows

```bash
deploy-docker.bat
```

#### Linux/macOS

```bash
chmod +x deploy-docker.sh
./deploy-docker.sh
```

### æ–¹å¼ 2: æ‰‹åŠ¨éƒ¨ç½²

```bash
# 1. æ„å»ºé•œåƒ
docker-compose build

# 2. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 3. æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

## éƒ¨ç½²æµç¨‹

### 1. æ£€æŸ¥ç¯å¢ƒ

è„šæœ¬ä¼šè‡ªåŠ¨æ£€æŸ¥:
- âœ… Docker æ˜¯å¦å®‰è£…
- âœ… Docker Compose æ˜¯å¦å®‰è£…
- âœ… Docker æœåŠ¡æ˜¯å¦è¿è¡Œ

### 2. æ¸…ç†æ—§å®¹å™¨

```bash
docker-compose down -v
```

åˆ é™¤æ—§çš„å®¹å™¨å’Œæ•°æ®å·

### 3. æ„å»ºé•œåƒ

```bash
docker-compose build --no-cache
```

æ„å»ºè¿‡ç¨‹:
- åç«¯: Maven æ„å»º â†’ æ‰“åŒ… JAR â†’ åˆ›å»ºé•œåƒ
- å‰ç«¯: npm æ„å»º â†’ æ‰“åŒ…é™æ€æ–‡ä»¶ â†’ Nginx é•œåƒ

é¢„è®¡æ—¶é—´: 5-10 åˆ†é’Ÿ

### 4. å¯åŠ¨æœåŠ¡

```bash
docker-compose up -d
```

å¯åŠ¨é¡ºåº:
1. MySQL (ç­‰å¾…å¥åº·æ£€æŸ¥é€šè¿‡)
2. Redis (ç­‰å¾…å¥åº·æ£€æŸ¥é€šè¿‡)
3. Backend (ä¾èµ– MySQL å’Œ Redis)
4. Frontend (ä¾èµ– Backend)

### 5. ç­‰å¾…å°±ç»ª

æœåŠ¡å¯åŠ¨æ—¶é—´:
- MySQL: ~10ç§’
- Redis: ~5ç§’
- Backend: ~30-60ç§’ (åŒ…å«æ•°æ®åº“åˆå§‹åŒ–)
- Frontend: ~10ç§’

### 6. è®¿é—®ç³»ç»Ÿ

- å‰ç«¯: http://localhost:38443
- åç«¯: http://localhost:31943/api
- å¥åº·æ£€æŸ¥: http://localhost:31943/actuator/health

## æœåŠ¡é…ç½®

### ç«¯å£æ˜ å°„

| æœåŠ¡ | å®¹å™¨ç«¯å£ | ä¸»æœºç«¯å£ |
|------|---------|---------|
| MySQL | 3306 | 3306 |
| Redis | 6379 | 6379 |
| Backend | 31943 | 31943 |
| Frontend | 38443 | 38443 |

### ç¯å¢ƒå˜é‡

#### åç«¯æœåŠ¡

```yaml
SPRING_PROFILES_ACTIVE: prod
SPRING_DATASOURCE_URL: jdbc:mysql://mysql:3306/cost_system
SPRING_DATASOURCE_USERNAME: root
SPRING_DATASOURCE_PASSWORD: liurongai
SPRING_REDIS_HOST: redis
SPRING_REDIS_PORT: 6379
SPRING_REDIS_PASSWORD: alanlr
```

#### MySQL

```yaml
MYSQL_ROOT_PASSWORD: liurongai
MYSQL_DATABASE: cost_system
MYSQL_CHARACTER_SET_SERVER: utf8mb4
MYSQL_COLLATION_SERVER: utf8mb4_unicode_ci
```

#### Redis

```yaml
REDIS_PASSWORD: alanlr
```

### æ•°æ®å·

```yaml
volumes:
  mysql-data:    # MySQL æ•°æ®æŒä¹…åŒ–
  redis-data:    # Redis æ•°æ®æŒä¹…åŒ–
```

## å¸¸ç”¨å‘½ä»¤

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€

```bash
# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨
docker-compose ps

# æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
docker-compose top
```

### æŸ¥çœ‹æ—¥å¿—

```bash
# æ‰€æœ‰æœåŠ¡
docker-compose logs -f

# ç‰¹å®šæœåŠ¡
docker-compose logs -f backend
docker-compose logs -f frontend
docker-compose logs -f mysql
docker-compose logs -f redis

# æœ€è¿‘ 100 è¡Œ
docker-compose logs --tail=100 backend
```

### é‡å¯æœåŠ¡

```bash
# é‡å¯æ‰€æœ‰æœåŠ¡
docker-compose restart

# é‡å¯ç‰¹å®šæœåŠ¡
docker-compose restart backend
docker-compose restart frontend
```

### åœæ­¢æœåŠ¡

```bash
# åœæ­¢æœåŠ¡ (ä¿ç•™å®¹å™¨)
docker-compose stop

# åœæ­¢å¹¶åˆ é™¤å®¹å™¨ (ä¿ç•™æ•°æ®)
docker-compose down

# åœæ­¢å¹¶åˆ é™¤å®¹å™¨å’Œæ•°æ®
docker-compose down -v
```

### è¿›å…¥å®¹å™¨

```bash
# è¿›å…¥åç«¯å®¹å™¨
docker exec -it cost-backend bash

# è¿›å…¥ MySQL å®¹å™¨
docker exec -it cost-mysql bash

# è¿æ¥ MySQL
docker exec -it cost-mysql mysql -uroot -pliurongai cost_system

# è¿æ¥ Redis
docker exec -it cost-redis redis-cli -a alanlr
```

### æ›´æ–°æœåŠ¡

```bash
# 1. æ‹‰å–æœ€æ–°ä»£ç 
git pull

# 2. é‡æ–°æ„å»º
docker-compose build --no-cache

# 3. é‡å¯æœåŠ¡
docker-compose up -d
```

## æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: ç«¯å£è¢«å ç”¨

**ç—‡çŠ¶**: å¯åŠ¨å¤±è´¥,æç¤ºç«¯å£å·²è¢«ä½¿ç”¨

**è§£å†³**:
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -ano | findstr "38443"  # Windows
lsof -i :38443                  # Linux/macOS

# ä¿®æ”¹ç«¯å£ (docker-compose.yml)
ports:
  - "38444:38443"  # æ”¹ä¸ºå…¶ä»–ç«¯å£
```

### é—®é¢˜ 2: åç«¯å¯åŠ¨å¤±è´¥

**ç—‡çŠ¶**: åç«¯å®¹å™¨ä¸æ–­é‡å¯

**è§£å†³**:
```bash
# æŸ¥çœ‹æ—¥å¿—
docker-compose logs backend

# å¸¸è§åŸå› :
# 1. æ•°æ®åº“è¿æ¥å¤±è´¥ - æ£€æŸ¥ MySQL æ˜¯å¦å°±ç»ª
# 2. Redis è¿æ¥å¤±è´¥ - æ£€æŸ¥ Redis æ˜¯å¦å°±ç»ª
# 3. å†…å­˜ä¸è¶³ - å¢åŠ  Docker å†…å­˜é™åˆ¶
```

### é—®é¢˜ 3: å‰ç«¯æ— æ³•è®¿é—®åç«¯

**ç—‡çŠ¶**: å‰ç«¯é¡µé¢æ‰“å¼€,ä½† API è¯·æ±‚å¤±è´¥

**è§£å†³**:
```bash
# 1. æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ
curl http://localhost:31943/actuator/health

# 2. æ£€æŸ¥ç½‘ç»œè¿æ¥
docker network inspect cost-system_cost-network

# 3. æ£€æŸ¥ nginx é…ç½®
docker exec cost-frontend cat /etc/nginx/conf.d/default.conf
```

### é—®é¢˜ 4: æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥

**ç—‡çŠ¶**: åç«¯æ—¥å¿—æ˜¾ç¤º SQL æ‰§è¡Œé”™è¯¯

**è§£å†³**:
```bash
# 1. åˆ é™¤æ•°æ®å·é‡æ–°åˆå§‹åŒ–
docker-compose down -v
docker-compose up -d

# 2. æ‰‹åŠ¨æ‰§è¡Œ SQL
docker exec -i cost-mysql mysql -uroot -pliurongai cost_system < cost-backend/src/main/resources/sql/schema.sql
```

### é—®é¢˜ 5: æ„å»ºé•œåƒå¤±è´¥

**ç—‡çŠ¶**: docker-compose build æŠ¥é”™

**è§£å†³**:
```bash
# 1. æ¸…ç† Docker ç¼“å­˜
docker system prune -a

# 2. æ£€æŸ¥ç½‘ç»œè¿æ¥ (Maven/npm ä¸‹è½½ä¾èµ–)

# 3. ä½¿ç”¨å›½å†…é•œåƒ
# Maven: é…ç½® settings.xml
# npm: npm config set registry https://registry.npmmirror.com
```

## æ€§èƒ½ä¼˜åŒ–

### 1. è°ƒæ•´å†…å­˜é™åˆ¶

```yaml
# docker-compose.yml
services:
  backend:
    deploy:
      resources:
        limits:
          memory: 2G
        reservations:
          memory: 1G
```

### 2. è°ƒæ•´ JVM å‚æ•°

```yaml
# docker-compose.yml
services:
  backend:
    environment:
      JAVA_OPTS: "-Xms512m -Xmx1024m -XX:+UseG1GC"
```

### 3. å¯ç”¨ Redis æŒä¹…åŒ–

```yaml
# docker-compose.yml
services:
  redis:
    command: redis-server --requirepass alanlr --appendonly yes --save 60 1000
```

## ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### 1. ä¿®æ”¹å¯†ç 

```yaml
# docker-compose.yml
environment:
  MYSQL_ROOT_PASSWORD: <strong-password>
  SPRING_REDIS_PASSWORD: <strong-password>
  JWT_SECRET: <random-secret-key>
```

### 2. ä½¿ç”¨å¤–éƒ¨æ•°æ®åº“

```yaml
# docker-compose.yml
services:
  backend:
    environment:
      SPRING_DATASOURCE_URL: jdbc:mysql://your-db-host:3306/cost_system
      SPRING_DATASOURCE_USERNAME: your-username
      SPRING_DATASOURCE_PASSWORD: your-password
```

### 3. é…ç½® HTTPS

```yaml
# docker-compose.yml
services:
  frontend:
    ports:
      - "443:443"
    volumes:
      - ./ssl:/etc/nginx/ssl:ro
```

### 4. é…ç½®æ—¥å¿—

```yaml
# docker-compose.yml
services:
  backend:
    volumes:
      - ./logs:/app/logs
```

### 5. é…ç½®å¤‡ä»½

```bash
# å¤‡ä»½è„šæœ¬
#!/bin/bash
DATE=$(date +%Y%m%d_%H%M%S)
docker exec cost-mysql mysqldump -uroot -pliurongai cost_system > backup_$DATE.sql
```

## ç›‘æ§å’Œç»´æŠ¤

### 1. å¥åº·æ£€æŸ¥

```bash
# åç«¯å¥åº·æ£€æŸ¥
curl http://localhost:31943/actuator/health

# æ•°æ®åº“è¿æ¥æ£€æŸ¥
docker exec cost-mysql mysqladmin ping -h localhost -uroot -pliurongai

# Redis è¿æ¥æ£€æŸ¥
docker exec cost-redis redis-cli -a alanlr ping
```

### 2. èµ„æºç›‘æ§

```bash
# æŸ¥çœ‹èµ„æºä½¿ç”¨
docker stats

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
docker system df
```

### 3. æ—¥å¿—ç®¡ç†

```bash
# æ¸…ç†æ—¥å¿—
docker-compose logs --no-log-prefix > /dev/null

# é™åˆ¶æ—¥å¿—å¤§å° (docker-compose.yml)
logging:
  driver: "json-file"
  options:
    max-size: "10m"
    max-file: "3"
```

## å¸è½½

### å®Œå…¨å¸è½½

```bash
# 1. åœæ­¢å¹¶åˆ é™¤æ‰€æœ‰å®¹å™¨
docker-compose down -v

# 2. åˆ é™¤é•œåƒ
docker rmi cost-system_backend cost-system_frontend

# 3. æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

## æ€»ç»“

### ä¼˜åŠ¿

- âœ… ä¸€é”®éƒ¨ç½²
- âœ… ç¯å¢ƒéš”ç¦»
- âœ… æ˜“äºæ‰©å±•
- âœ… ä¾¿äºè¿ç§»
- âœ… ç»Ÿä¸€ç®¡ç†

### æ³¨æ„äº‹é¡¹

- âš ï¸ ç”Ÿäº§ç¯å¢ƒä¿®æ”¹é»˜è®¤å¯†ç 
- âš ï¸ å®šæœŸå¤‡ä»½æ•°æ®
- âš ï¸ ç›‘æ§èµ„æºä½¿ç”¨
- âš ï¸ åŠæ—¶æ›´æ–°é•œåƒ
- âš ï¸ é…ç½®æ—¥å¿—è½®è½¬

## æ”¯æŒ

å¦‚æœ‰é—®é¢˜,è¯·æŸ¥çœ‹:
- æ—¥å¿—: `docker-compose logs -f`
- æ–‡æ¡£: `docs/`
- Issues: GitHub Issues



---


## æ¥æºï¼šDatabase-Initialization.md

# æ•°æ®åº“åˆå§‹åŒ–é…ç½®è¯´æ˜

## æ¦‚è¿°

ç³»ç»Ÿå·²ç§»é™¤ Flyway,æ”¹ç”¨å¯åŠ¨æ—¶åŠ è½½ SQL è„šæœ¬çš„æ–¹å¼åˆå§‹åŒ–æ•°æ®åº“ã€‚

## é…ç½®å˜æ›´

### 1. ç§»é™¤ Flyway ä¾èµ–

**pom.xml**:
```xml
<!-- å·²ç§»é™¤ -->
<!-- <dependency>
    <groupId>org.flywaydb</groupId>
    <artifactId>flyway-core</artifactId>
</dependency> -->
```

### 2. æ›´æ–° application.yml

```yaml
spring:
  jpa:
    hibernate:
      ddl-auto: none  # ä¸ä½¿ç”¨ Hibernate è‡ªåŠ¨å»ºè¡¨

  sql:
    init:
      mode: always  # å¯åŠ¨æ—¶æ‰§è¡Œ SQL è„šæœ¬
      schema-locations: classpath:sql/schema.sql
      data-locations: classpath:sql/data.sql
      continue-on-error: false
      encoding: UTF-8
```

## SQL è„šæœ¬

### schema.sql - å»ºè¡¨è„šæœ¬

ä½ç½®: `src/main/resources/sql/schema.sql`

ç‰¹ç‚¹:
- ä½¿ç”¨ `CREATE TABLE IF NOT EXISTS` ç¡®ä¿å¯é‡å¤æ‰§è¡Œ
- åŒ…å«åŠ¨æ€æ·»åŠ åˆ—çš„é€»è¾‘
- æ”¯æŒå¢é‡æ›´æ–°

ç¤ºä¾‹:
```sql
-- åˆ›å»ºè¡¨
CREATE TABLE IF NOT EXISTS `users` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `username` VARCHAR(50) NOT NULL,
  ...
);

-- åŠ¨æ€æ·»åŠ åˆ—
SET @col_exists = 0;
SELECT COUNT(*) INTO @col_exists
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE()
  AND TABLE_NAME = 'users'
  AND COLUMN_NAME = 'email';

SET @sql = IF(@col_exists = 0,
  'ALTER TABLE users ADD COLUMN email VARCHAR(100)',
  'SELECT ''Column already exists''');
PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;
```

### data.sql - åˆå§‹åŒ–æ•°æ®

ä½ç½®: `src/main/resources/sql/data.sql`

ç‰¹ç‚¹:
- ä½¿ç”¨ `INSERT IGNORE` ç¡®ä¿å¯é‡å¤æ‰§è¡Œ
- åˆå§‹åŒ–ç®¡ç†å‘˜è´¦å·
- åˆå§‹åŒ–æƒé™æ•°æ®
- åˆå§‹åŒ–é»˜è®¤æ¨¡æ¿å’Œå·¥ä½œæµ

ç¤ºä¾‹:
```sql
-- åˆå§‹åŒ–ç®¡ç†å‘˜
INSERT IGNORE INTO `users` (`id`, `username`, `password_hash`)
VALUES (1, 'admin', '$2a$10$...');

-- åˆå§‹åŒ–æƒé™
INSERT IGNORE INTO `permissions` (`code`, `name`)
VALUES ('PROJECT_CREATE', 'åˆ›å»ºé¡¹ç›®');
```

## SQL åŠ è½½å™¨

### SqlScriptLoader.java

ä½ç½®: `src/main/java/com/costsystem/config/SqlScriptLoader.java`

åŠŸèƒ½:
- åœ¨åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨æ‰§è¡Œ SQL è„šæœ¬
- æŒ‰é¡ºåºæ‰§è¡Œ schema.sql å’Œ data.sql
- æ™ºèƒ½è§£æ SQL è¯­å¥
- å¿½ç•¥ "å·²å­˜åœ¨" é”™è¯¯
- è¯¦ç»†çš„æ—¥å¿—è¾“å‡º

æ‰§è¡Œé¡ºåº:
1. schema.sql - åˆ›å»ºè¡¨ç»“æ„
2. data.sql - åˆå§‹åŒ–æ•°æ®

## æ‰©å±•å­—æ®µå’Œè¡¨

### æ–¹å¼ 1: ä¿®æ”¹ schema.sql

åœ¨ `schema.sql` ä¸­æ·»åŠ åŠ¨æ€æ·»åŠ åˆ—çš„é€»è¾‘:

```sql
-- æ£€æŸ¥å¹¶æ·»åŠ æ–°åˆ—
SET @col_exists = 0;
SELECT COUNT(*) INTO @col_exists
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE()
  AND TABLE_NAME = 'your_table'
  AND COLUMN_NAME = 'new_column';

SET @sql = IF(@col_exists = 0,
  'ALTER TABLE your_table ADD COLUMN new_column VARCHAR(100) COMMENT ''æ–°åˆ—''',
  'SELECT ''Column new_column already exists''');
PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;
```

### æ–¹å¼ 2: åˆ›å»ºå¢é‡è„šæœ¬

åˆ›å»ºæ–°çš„ SQL æ–‡ä»¶: `sql/updates/V1.1__add_new_column.sql`

```sql
-- æ·»åŠ æ–°åˆ—
ALTER TABLE users ADD COLUMN IF NOT EXISTS phone VARCHAR(20);

-- æ·»åŠ æ–°è¡¨
CREATE TABLE IF NOT EXISTS new_table (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  ...
);
```

ç„¶ååœ¨ `SqlScriptLoader` ä¸­æ·»åŠ æ‰§è¡Œé€»è¾‘:

```java
// æ‰§è¡Œå¢é‡è„šæœ¬
executeScript("sql/updates/V1.1__add_new_column.sql");
```

### æ–¹å¼ 3: ä½¿ç”¨ JPA å®ä½“

å¦‚æœåªæ˜¯æ·»åŠ ç®€å•å­—æ®µ,å¯ä»¥:
1. åœ¨å®ä½“ç±»ä¸­æ·»åŠ å­—æ®µ
2. ä¸´æ—¶è®¾ç½® `ddl-auto: update`
3. å¯åŠ¨åº”ç”¨è‡ªåŠ¨åˆ›å»ºåˆ—
4. æ”¹å› `ddl-auto: none`
5. å°† ALTER è¯­å¥æ·»åŠ åˆ° schema.sql

## åˆå§‹åŒ–æ•°æ®

### ç®¡ç†å‘˜è´¦å·

- ç”¨æˆ·å: `admin`
- å¯†ç : `admin123`
- é‚®ç®±: `admin@example.com`

### é»˜è®¤æƒé™

ç³»ç»Ÿé¢„ç½®äº†ä»¥ä¸‹æƒé™:
- PROJECT_CREATE - åˆ›å»ºé¡¹ç›®
- PROJECT_EDIT - ç¼–è¾‘é¡¹ç›®
- PROJECT_DELETE - åˆ é™¤é¡¹ç›®
- VERSION_CREATE - åˆ›å»ºç‰ˆæœ¬
- VERSION_EDIT - ç¼–è¾‘ç‰ˆæœ¬
- VERSION_SUBMIT - æäº¤å®¡æ‰¹
- VERSION_APPROVE - å®¡æ‰¹ç‰ˆæœ¬
- TEMPLATE_MANAGE - ç®¡ç†æ¨¡æ¿
- WORKFLOW_MANAGE - ç®¡ç†æµç¨‹
- USER_MANAGE - ç®¡ç†ç”¨æˆ·
- SYSTEM_ADMIN - ç³»ç»Ÿç®¡ç†

### é»˜è®¤æ¨¡æ¿

ç³»ç»Ÿé¢„ç½®äº†ä¸€ä¸ªé»˜è®¤æ¨¡æ¿,åŒ…å«:
- ç‰©èµ„æ˜ç»†æ¨¡å—
- åˆ†åŒ…æ˜ç»†æ¨¡å—
- è´¹ç”¨æ˜ç»†æ¨¡å—

### é»˜è®¤å·¥ä½œæµ

ç³»ç»Ÿé¢„ç½®äº†ä¸€ä¸ªé»˜è®¤å®¡æ‰¹æµç¨‹:
1. å¼€å§‹
2. å¤æ ¸
3. å®¡æ‰¹
4. ç»“æŸ

## å¯åŠ¨æµç¨‹

1. **åº”ç”¨å¯åŠ¨**
2. **Spring Boot åˆå§‹åŒ–**
3. **SqlScriptLoader æ‰§è¡Œ**
   - æ‰§è¡Œ schema.sql (å»ºè¡¨)
   - æ‰§è¡Œ data.sql (åˆå§‹åŒ–æ•°æ®)
4. **åº”ç”¨å°±ç»ª**

## æ—¥å¿—è¾“å‡º

å¯åŠ¨æ—¶ä¼šçœ‹åˆ°ç±»ä¼¼æ—¥å¿—:

```
INFO  SqlScriptLoader - å¼€å§‹æ‰§è¡Œ SQL åˆå§‹åŒ–è„šæœ¬...
INFO  SqlScriptLoader - æ‰§è¡Œè„šæœ¬: sql/schema.sql
DEBUG SqlScriptLoader - æ‰§è¡Œ SQL: CREATE TABLE IF NOT EXISTS `users` ...
DEBUG SqlScriptLoader - è·³è¿‡å·²å­˜åœ¨çš„å¯¹è±¡: Table 'users' already exists
INFO  SqlScriptLoader - è„šæœ¬æ‰§è¡Œå®Œæˆ: sql/schema.sql
INFO  SqlScriptLoader - æ‰§è¡Œè„šæœ¬: sql/data.sql
INFO  SqlScriptLoader - è„šæœ¬æ‰§è¡Œå®Œæˆ: sql/data.sql
INFO  SqlScriptLoader - SQL åˆå§‹åŒ–è„šæœ¬æ‰§è¡Œå®Œæˆ
```

## æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: è„šæœ¬æ‰§è¡Œå¤±è´¥

**ç—‡çŠ¶**: å¯åŠ¨æ—¶æŠ¥é”™ "SQL åˆå§‹åŒ–è„šæœ¬æ‰§è¡Œå¤±è´¥"

**è§£å†³**:
1. æ£€æŸ¥ SQL è¯­æ³•
2. æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
3. ç¡®è®¤æ•°æ®åº“è¿æ¥æ­£å¸¸
4. æ£€æŸ¥æ•°æ®åº“ç”¨æˆ·æƒé™

### é—®é¢˜ 2: è¡¨å·²å­˜åœ¨

**ç—‡çŠ¶**: æ—¥å¿—æ˜¾ç¤º "Table already exists"

**è§£å†³**: è¿™æ˜¯æ­£å¸¸çš„,ç³»ç»Ÿä¼šè‡ªåŠ¨è·³è¿‡

### é—®é¢˜ 3: åˆ—å·²å­˜åœ¨

**ç—‡çŠ¶**: æ—¥å¿—æ˜¾ç¤º "Column already exists"

**è§£å†³**: è¿™æ˜¯æ­£å¸¸çš„,åŠ¨æ€æ·»åŠ åˆ—é€»è¾‘ä¼šè‡ªåŠ¨å¤„ç†

### é—®é¢˜ 4: æ•°æ®é‡å¤

**ç—‡çŠ¶**: æ—¥å¿—æ˜¾ç¤º "Duplicate entry"

**è§£å†³**: ä½¿ç”¨ `INSERT IGNORE` ä¼šè‡ªåŠ¨è·³è¿‡é‡å¤æ•°æ®

## æœ€ä½³å®è·µ

### 1. ç‰ˆæœ¬æ§åˆ¶

å°† SQL è„šæœ¬çº³å…¥ç‰ˆæœ¬æ§åˆ¶:
```
sql/
  schema.sql          # ä¸»å»ºè¡¨è„šæœ¬
  data.sql            # åˆå§‹åŒ–æ•°æ®
  updates/            # å¢é‡æ›´æ–°è„šæœ¬
    V1.1__xxx.sql
    V1.2__xxx.sql
```

### 2. å‘½åè§„èŒƒ

å¢é‡è„šæœ¬å‘½å:
- `V{ç‰ˆæœ¬å·}__{æè¿°}.sql`
- ä¾‹å¦‚: `V1.1__add_email_column.sql`

### 3. æ³¨é‡Šè§„èŒƒ

```sql
-- ============================================
-- åŠŸèƒ½: æ·»åŠ ç”¨æˆ·é‚®ç®±å­—æ®µ
-- ç‰ˆæœ¬: V1.1
-- æ—¥æœŸ: 2024-02-19
-- ä½œè€…: Developer
-- ============================================
```

### 4. æµ‹è¯•æµç¨‹

1. åœ¨å¼€å‘ç¯å¢ƒæµ‹è¯•
2. å¤‡ä»½ç”Ÿäº§æ•°æ®åº“
3. åœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯
4. éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

### 5. å›æ»šæ–¹æ¡ˆ

ä¸ºæ¯ä¸ªæ›´æ–°å‡†å¤‡å›æ»šè„šæœ¬:
```sql
-- rollback_V1.1.sql
ALTER TABLE users DROP COLUMN IF EXISTS email;
```

## ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### æ–¹å¼ 1: è‡ªåŠ¨æ‰§è¡Œ (æ¨èå¼€å‘ç¯å¢ƒ)

ä¿æŒ `spring.sql.init.mode=always`

### æ–¹å¼ 2: æ‰‹åŠ¨æ‰§è¡Œ (æ¨èç”Ÿäº§ç¯å¢ƒ)

1. è®¾ç½® `spring.sql.init.mode=never`
2. æ‰‹åŠ¨æ‰§è¡Œ SQL è„šæœ¬:
   ```bash
   mysql -u root -p cost_system < schema.sql
   mysql -u root -p cost_system < data.sql
   ```

### æ–¹å¼ 3: æ··åˆæ¨¡å¼

- å¼€å‘ç¯å¢ƒ: `mode=always`
- ç”Ÿäº§ç¯å¢ƒ: `mode=never` + æ‰‹åŠ¨æ‰§è¡Œ

## æ€»ç»“

ä¼˜åŠ¿:
- âœ… ç®€å•ç›´è§‚
- âœ… æ˜“äºç†è§£å’Œç»´æŠ¤
- âœ… æ”¯æŒå¯é‡å¤æ‰§è¡Œ
- âœ… æ”¯æŒå¢é‡æ›´æ–°
- âœ… æ— éœ€é¢å¤–ä¾èµ–

æ³¨æ„äº‹é¡¹:
- âš ï¸ ç¡®ä¿ SQL è¯­æ³•æ­£ç¡®
- âš ï¸ ä½¿ç”¨ IF NOT EXISTS
- âš ï¸ ä½¿ç”¨ INSERT IGNORE
- âš ï¸ åšå¥½å¤‡ä»½
- âš ï¸ æµ‹è¯•åå†éƒ¨ç½²



---


## æ¥æºï¼šMavené…ç½®è¯´æ˜.md

# Maven é…ç½®è¯´æ˜

## âœ… å·²å®Œæˆé…ç½®

### 1. æœ¬åœ°ä»“åº“è¿ç§»åˆ°Dç›˜

**é…ç½®æ–‡ä»¶ä½ç½®**:
```
D:\download\apache-maven-3.9.11-bin\apache-maven-3.9.11\conf\settings.xml
```

**å·²è®¾ç½®çš„æœ¬åœ°ä»“åº“è·¯å¾„**:
```xml
<localRepository>D:/Maven/repository</localRepository>
```

**ä»“åº“ç›®å½•**:
```
D:\Maven\repository\
```

### 2. å·²é…ç½®çš„é•œåƒæº

#### é˜¿é‡Œäº‘ä¸­å¤®ä»“åº“é•œåƒ
```xml
<mirror>
    <id>aliyun</id>
    <name>Aliyun Maven Repository</name>
    <url>https://maven.aliyun.com/repository/public</url>
    <mirrorOf>central</mirrorOf>
</mirror>
```

#### é˜¿é‡Œäº‘Springä»“åº“é•œåƒ
```xml
<mirror>
    <id>aliyun-spring</id>
    <name>Aliyun Spring Repository</name>
    <url>https://maven.aliyun.com/repository/spring</url>
    <mirrorOf>spring-milestones</mirrorOf>
</mirror>
```

---

## ğŸ“¦ éªŒè¯é…ç½®

### æŸ¥çœ‹å½“å‰æœ¬åœ°ä»“åº“ä½ç½®
```bash
mvn help:evaluate -Dexpression=settings.localRepository -q -DforceStdout
```

**é¢„æœŸè¾“å‡º**: `D:\Maven\repository`

### æŸ¥çœ‹Mavenç‰ˆæœ¬ä¿¡æ¯
```bash
mvn -version
```

### æ¸…ç†å¹¶é‡æ–°ä¸‹è½½ä¾èµ–
```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd d:\é¡¹ç›®éœ€æ±‚\å»ºææˆæœ¬ç®¡ç†ç³»ç»Ÿ\cost-system\cost-backend

# æ¸…ç†æ—§çš„æ„å»ºäº§ç‰©
mvn clean

# ä¸‹è½½ä¾èµ–åˆ°æ–°ä»“åº“
mvn dependency:resolve
```

---

## ğŸ”„ è¿ç§»æ—§çš„ä¾èµ–(å¯é€‰)

å¦‚æœæ‚¨ä¹‹å‰å·²ç»åœ¨Cç›˜ä¸‹è½½äº†Mavenä¾èµ–,å¯ä»¥è¿ç§»åˆ°æ–°ä½ç½®:

### 1. æ‰¾åˆ°æ—§ä»“åº“ä½ç½®
é»˜è®¤ä½ç½®é€šå¸¸æ˜¯:
```
C:\Users\æ‚¨çš„ç”¨æˆ·å\.m2\repository\
```

### 2. å¤åˆ¶åˆ°æ–°ä½ç½®
```bash
# ä½¿ç”¨PowerShellå¤åˆ¶(éœ€è¦ç®¡ç†å‘˜æƒé™)
xcopy "C:\Users\%USERNAME%\.m2\repository" "D:\Maven\repository" /E /I /H /Y
```

### 3. åˆ é™¤æ—§ä»“åº“(å¯é€‰,é‡Šæ”¾Cç›˜ç©ºé—´)
```bash
# è¯·ç¡®è®¤å¤åˆ¶æˆåŠŸåå†æ‰§è¡Œ!
rmdir /S /Q "C:\Users\%USERNAME%\.m2\repository"
```

---

## ğŸ¯ é…ç½®ç”Ÿæ•ˆ

é…ç½®å·²ç«‹å³ç”Ÿæ•ˆ!ä¸‹æ¬¡ä½¿ç”¨Mavenæ—¶,æ‰€æœ‰ä¾èµ–éƒ½ä¼šä¸‹è½½åˆ° `D:\Maven\repository\`

### å½“å‰é¡¹ç›®ä½¿ç”¨
```bash
cd d:\é¡¹ç›®éœ€æ±‚\å»ºææˆæœ¬ç®¡ç†ç³»ç»Ÿ\cost-system\cost-backend
mvn clean install
```

æ‰€æœ‰jaråŒ…éƒ½ä¼šä¸‹è½½åˆ° `D:\Maven\repository\` ç›®å½•ã€‚

---

## ğŸ”§ é«˜çº§é…ç½®(å¯é€‰)

### 1. é…ç½®æ›´å¤šé•œåƒæº

å¦‚æœéœ€è¦æ›´å¿«çš„ä¸‹è½½é€Ÿåº¦,å¯ä»¥æ·»åŠ æ›´å¤šé•œåƒ:

```xml
<!-- åä¸ºäº‘é•œåƒ -->
<mirror>
    <id>huaweicloud</id>
    <name>Huawei Cloud Maven Repository</name>
    <url>https://repo.huaweicloud.com/repository/maven/</url>
    <mirrorOf>central</mirrorOf>
</mirror>

<!-- è…¾è®¯äº‘é•œåƒ -->
<mirror>
    <id>tencentcloud</id>
    <name>Tencent Cloud Maven Repository</name>
    <url>https://mirrors.cloud.tencent.com/nexus/repository/maven-public/</url>
    <mirrorOf>central</mirrorOf>
</mirror>
```

### 2. é…ç½®JVMå†…å­˜å‚æ•°

å¦‚æœç¼–è¯‘å¤§å‹é¡¹ç›®æ—¶å†…å­˜ä¸è¶³,å¯ä»¥åˆ›å»º `MAVEN_OPTS` ç¯å¢ƒå˜é‡:

**Windowsç¯å¢ƒå˜é‡è®¾ç½®**:
```
å˜é‡å: MAVEN_OPTS
å˜é‡å€¼: -Xms512m -Xmx2048m
```

**æˆ–åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.mvn/jvm.config` æ–‡ä»¶**:
```
-Xms512m
-Xmx2048m
-XX:ReservedCodeCacheSize=512m
```

### 3. è®¾ç½®ä¸‹è½½çº¿ç¨‹æ•°

åœ¨ `settings.xml` ä¸­çš„ `<profiles>` ä¸‹æ·»åŠ :

```xml
<profile>
    <id>fast-download</id>
    <properties>
        <maven.artifact.threads>10</maven.artifact.threads>
    </properties>
</profile>

<activeProfiles>
    <activeProfile>fast-download</activeProfile>
</activeProfiles>
```

---

## ğŸ“Š ç£ç›˜ç©ºé—´ç®¡ç†

### æŸ¥çœ‹ä»“åº“å¤§å°
```bash
# PowerShell
Get-ChildItem -Path "D:\Maven\repository" -Recurse | Measure-Object -Property Length -Sum

# æˆ–ä½¿ç”¨ du å‘½ä»¤(éœ€è¦å®‰è£…)
du -sh D:\Maven\repository
```

### æ¸…ç†æ— ç”¨çš„ä¾èµ–
```bash
# æ¸…ç†æ‰€æœ‰é¡¹ç›®çš„æ„å»ºäº§ç‰©
mvn clean

# æ¸…ç†æœ¬åœ°ä»“åº“ä¸­çš„å¿«ç…§ç‰ˆæœ¬
mvn dependency:purge-local-repository -DmanualInclude=true

# æ¸…ç†ç‰¹å®šç»„çš„ä¾èµ–
mvn dependency:purge-local-repository -DreResolve=false -DactTransitively=false -DgroupId=org.springframework
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **è·¯å¾„æ ¼å¼**: 
   - Windowsä¸‹ä½¿ç”¨æ­£æ–œæ  `/` æˆ–åæ–œæ  `\` éƒ½å¯ä»¥
   - æ¨èä½¿ç”¨ `/` é¿å…è½¬ä¹‰é—®é¢˜

2. **æƒé™é—®é¢˜**:
   - ç¡®ä¿ Maven å¯¹ `D:\Maven\repository` ç›®å½•æœ‰è¯»å†™æƒé™

3. **IDEé…ç½®**:
   - **IDEA**: File â†’ Settings â†’ Build, Execution, Deployment â†’ Build Tools â†’ Maven
     - Maven home path: `D:\download\apache-maven-3.9.11-bin\apache-maven-3.9.11`
     - User settings file: `D:\download\apache-maven-3.9.11-bin\apache-maven-3.9.11\conf\settings.xml`
     - Local repository: `D:\Maven\repository`
   
   - **Eclipse**: Window â†’ Preferences â†’ Maven â†’ User Settings
     - User Settings: é€‰æ‹©ä¸Šè¿° settings.xml æ–‡ä»¶

4. **å¤šç”¨æˆ·åœºæ™¯**:
   - å¦‚æœå¤šä¸ªç”¨æˆ·å…±äº«åŒä¸€å°ç”µè„‘,å¯ä»¥ä¸ºæ¯ä¸ªç”¨æˆ·åˆ›å»ºç‹¬ç«‹çš„ settings.xml
   - æ”¾åœ¨ `C:\Users\ç”¨æˆ·å\.m2\settings.xml`

---

## ğŸš€ éªŒè¯æ–°é…ç½®

è¿è¡Œä»¥ä¸‹å‘½ä»¤æµ‹è¯•é…ç½®:

```bash
# 1. æ¸…ç†é¡¹ç›®
cd d:\é¡¹ç›®éœ€æ±‚\å»ºææˆæœ¬ç®¡ç†ç³»ç»Ÿ\cost-system\cost-backend
mvn clean

# 2. ä¸‹è½½ä¾èµ–
mvn dependency:resolve

# 3. æ£€æŸ¥æ–°ä»“åº“æ˜¯å¦æœ‰æ–‡ä»¶
dir D:\Maven\repository

# 4. ç¼–è¯‘é¡¹ç›®
mvn compile

# 5. è¿è¡Œé¡¹ç›®
mvn spring-boot:run
```

å¦‚æœä¸€åˆ‡æ­£å¸¸,æ‚¨åº”è¯¥åœ¨ `D:\Maven\repository` ä¸‹çœ‹åˆ°ä¸‹è½½çš„jaråŒ…!

---

**é…ç½®å®Œæˆæ—¶é—´**: 2026-02-08  
**Mavenç‰ˆæœ¬**: Apache Maven 3.9.11  
**Javaç‰ˆæœ¬**: JDK 21.0.9



---


## æ¥æºï¼šReactå‰ç«¯ä½¿ç”¨è¯´æ˜.md

# Reactå‰ç«¯ä½¿ç”¨è¯´æ˜

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
cost-frontend-react/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Layout.tsx              # ä¸»å¸ƒå±€ï¼ˆå¯¼èˆª+é¡¶æ ï¼‰
â”‚   â”œâ”€â”€ LineItemTable.tsx       # é«˜å¯†åº¦è¡¨æ ¼ç»„ä»¶
â”‚   â”œâ”€â”€ ExcelImport.tsx         # Excelå¯¼å…¥ç»„ä»¶
â”‚   â”œâ”€â”€ AuditLogPanel.tsx       # å®¡è®¡æ—¥å¿—é¢æ¿
â”‚   â”œâ”€â”€ MemberManagement.tsx    # æˆå‘˜ç®¡ç†ç»„ä»¶
â”‚   â”œâ”€â”€ FileHistoryDrawer.tsx   # æ–‡ä»¶å†å²æŠ½å±‰
â”‚   â””â”€â”€ FilePreviewModal.tsx    # æ–‡ä»¶é¢„è§ˆå¼¹çª—
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ Login.tsx               # ç™»å½•é¡µ
â”‚   â”œâ”€â”€ ProjectList.tsx         # é¡¹ç›®åˆ—è¡¨
â”‚   â”œâ”€â”€ ProjectDetail.tsx       # é¡¹ç›®è¯¦æƒ…ï¼ˆå«æˆå‘˜+å®¡è®¡æ—¥å¿—ï¼‰
â”‚   â”œâ”€â”€ Workbench.tsx           # ç‰ˆæœ¬å·¥ä½œå°ï¼ˆæ ¸å¿ƒé¡µé¢ï¼‰
â”‚   â”œâ”€â”€ FileCenter.tsx          # æ–‡ä»¶ä¸­å¿ƒ
â”‚   â””â”€â”€ MyTasks.tsx             # æˆ‘çš„å¾…åŠ
â”œâ”€â”€ services/
â”‚   â””â”€â”€ apiService.ts           # APIæ¥å£å°è£…
â”œâ”€â”€ constants.tsx               # å…¨å±€å¸¸é‡
â”œâ”€â”€ types.ts                    # TypeScriptç±»å‹å®šä¹‰
â””â”€â”€ App.tsx                     # è·¯ç”±é…ç½®
```

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### 1. å®‰è£…ä¾èµ–
```bash
cd cost-frontend-react
npm install --legacy-peer-deps
```

### 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

æˆ–è€…ç›´æ¥åŒå‡»æ ¹ç›®å½•çš„ï¼š
```
start-frontend-react.bat
```

### 3. è®¿é—®ç³»ç»Ÿ
```
åœ°å€: http://localhost:38443
ç”¨æˆ·å: admin
å¯†ç : password
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½è¯´æ˜

### 1. ç™»å½•è®¤è¯ (`/login`)
- ç”¨æˆ·åå¯†ç ç™»å½•
- JWTä»¤ç‰Œç®¡ç†
- è‡ªåŠ¨è·³è½¬

### 2. é¡¹ç›®åˆ—è¡¨ (`/projects`)
- é¡¹ç›®åˆ—è¡¨å±•ç¤º
- åˆ›å»ºæ–°é¡¹ç›®
- è¿›å…¥é¡¹ç›®è¯¦æƒ…

### 3. é¡¹ç›®è¯¦æƒ… (`/projects/:id`)
**å››ä¸ªæ ‡ç­¾é¡µï¼š**
- **ç‰ˆæœ¬åˆ—è¡¨**: æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬ï¼Œç‚¹å‡»æ‰“å¼€å·¥ä½œå°
- **é¡¹ç›®æˆå‘˜**: æ·»åŠ /ç§»é™¤æˆå‘˜ï¼Œé…ç½®7ç§æƒé™
- **æ“ä½œæ—¥å¿—**: æ—¶é—´è½´å±•ç¤ºæ‰€æœ‰æ“ä½œè®°å½•
- **é¡¹ç›®è®¾ç½®**: é¡¹ç›®åŸºæœ¬ä¿¡æ¯é…ç½®

### 4. ç‰ˆæœ¬å·¥ä½œå° (`/versions/:id/workbench`)
**æ ¸å¿ƒå·¥ä½œé¡µé¢ï¼ŒåŒ…å«ï¼š**
- **æ¨¡å—åˆ‡æ¢**: ææ–™/åˆ†åŒ…/è´¹ç”¨ä¸‰å¤§æ¨¡å—
- **æŒ‡æ ‡çœ‹æ¿**: å®æ—¶æ˜¾ç¤ºè®¡ç®—æŒ‡æ ‡
- **é«˜å¯†åº¦è¡¨æ ¼**: 
  - åŒå‡»ç¼–è¾‘
  - Tab/Enteré”®å¯¼èˆª
  - Ctrl+Væ‰¹é‡ç²˜è´´
  - è‡ªåŠ¨è®¡ç®—
- **Excelå¯¼å…¥**: æ‹–æ‹½ä¸Šä¼ Excelæ–‡ä»¶
- **ç‰ˆæœ¬æ“ä½œ**: ä¿å­˜/æäº¤/é‡ç®—

### 5. æ–‡ä»¶ä¸­å¿ƒ (`/versions/:id/files`)
- æ–‡ä»¶åˆ—è¡¨ + ç­¾ç« è®°å½•åŒæ ‡ç­¾
- ç‰ˆæœ¬åˆ‡æ¢è”åŠ¨æ–‡ä»¶ä¸ç­¾ç« æ•°æ®
- æ”¯æŒæœç´¢ã€ç­›é€‰ã€æŒ‰æ—¶é—´/å¤§å°æ’åº
- PDFåœ¨çº¿é¢„è§ˆä¸ä¸‹è½½
- ç›–ç« ä½ç½®å¯æ‹–æ‹½è°ƒæ•´å¹¶ä¿å­˜

### 6. æˆ‘çš„å¾…åŠ (`/my-tasks`)
- å¾…å®¡æ‰¹ä»»åŠ¡åˆ—è¡¨
- å¿«é€Ÿå®¡æ‰¹/é©³å›
- å®¡æ‰¹æ„è§è¾“å…¥
- æŸ¥çœ‹ç‰ˆæœ¬è¯¦æƒ…

---

## ğŸ“Š æƒé™è¯´æ˜

### 7ç§æƒé™ç±»å‹
```
PROJ_READ      - é¡¹ç›®åªè¯»ï¼ˆæŸ¥çœ‹é¡¹ç›®ä¿¡æ¯ï¼‰
PROJ_WRITE     - é¡¹ç›®ç¼–è¾‘ï¼ˆä¿®æ”¹é¡¹ç›®ä¿¡æ¯ï¼‰
ITEM_READ      - æ˜ç»†åªè¯»ï¼ˆæŸ¥çœ‹æˆæœ¬æ˜ç»†ï¼‰
ITEM_WRITE     - æ˜ç»†ç¼–è¾‘ï¼ˆç¼–è¾‘æˆæœ¬æ˜ç»†ï¼‰
VERSION_REVIEW - ç‰ˆæœ¬å®¡æ‰¹ï¼ˆå®¡æ‰¹ç‰ˆæœ¬ï¼‰
VERSION_ISSUE  - ç‰ˆæœ¬ç­¾å‘ï¼ˆç­¾å‘ç‰ˆæœ¬ï¼‰
SEAL           - ç­¾ç« æƒé™ï¼ˆç›–ç« æ“ä½œï¼‰
```

---

## ğŸ¨ UIç‰¹ç‚¹

### éµå¾ªå…¨å±€UIè§„èŒƒ
- ä¸“ä¸šé«˜å¯†åº¦è®¾è®¡
- å…‹åˆ¶ç®€æ´é£æ ¼
- æ•°æ®é©±åŠ¨å±•ç¤º
- å·¦å¯¹é½å¸ƒå±€

### å…³é”®äº¤äº’
1. **è¡¨æ ¼è¡Œå†…ç¼–è¾‘**: åŒå‡»å•å…ƒæ ¼è¿›å…¥ç¼–è¾‘æ¨¡å¼
2. **é”®ç›˜å¯¼èˆª**: Tabæ¨ªå‘ã€Enterçºµå‘åˆ‡æ¢
3. **æ‰¹é‡ç²˜è´´**: ä»Excelå¤åˆ¶å¤šè¡Œï¼ŒCtrl+Vç²˜è´´
4. **å®æ—¶è®¡ç®—**: ä¿®æ”¹æ•°é‡/å•ä»·ï¼Œè‡ªåŠ¨ç®—æ€»é¢
5. **å¾…åŠæé†’**: å¯¼èˆªæ å’Œé“ƒé“›å›¾æ ‡æ˜¾ç¤ºæ•°é‡

---

## ğŸ”§ APIé…ç½®

### åç«¯åœ°å€
- é»˜è®¤: `http://localhost:31943/api`
- é…ç½®æ–‡ä»¶: `vite.config.ts`

```typescript
server: {
  port: 38443,
  proxy: {
    '/api': {
      target: 'http://localhost:31943',
      changeOrigin: true,
    },
  },
}
```

---

## ğŸ“ å¼€å‘è¯´æ˜

### æ·»åŠ æ–°é¡µé¢
1. åœ¨ `pages/` åˆ›å»ºæ–°ç»„ä»¶
2. åœ¨ `App.tsx` æ·»åŠ è·¯ç”±
3. åœ¨ `constants.tsx` æ·»åŠ å¯¼èˆªé¡¹ï¼ˆå¯é€‰ï¼‰

### æ·»åŠ æ–°API
åœ¨ `services/apiService.ts` ä¸­æ·»åŠ ï¼š
```typescript
export const xxxApi = {
  list: () => request('/xxx'),
  get: (id: string) => request(`/xxx/${id}`),
  create: (data: any) => request('/xxx', {
    method: 'POST',
    body: JSON.stringify(data),
  }),
};
```

### æ ·å¼è§„èŒƒ
- ä½¿ç”¨ Tailwind CSS
- éµå¾ª `docs/Frontend-UI-Global-Standard.md`
- ä¸»è‰²è°ƒ: blue-600
- èƒŒæ™¯: slate-50/white
- åœ†è§’: 4px

---

## ğŸ› å¸¸è§é—®é¢˜

### 1. ç™»å½•åè·³è½¬é”™è¯¯
- æ£€æŸ¥tokenæ˜¯å¦æ­£ç¡®å­˜å‚¨
- æ¸…é™¤localStorageé‡æ–°ç™»å½•

### 2. APIè¯·æ±‚å¤±è´¥
- ç¡®è®¤åç«¯å·²å¯åŠ¨ï¼ˆç«¯å£31943ï¼‰
- æ£€æŸ¥ä»£ç†é…ç½®
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

### 3. Excelå¯¼å…¥å¤±è´¥
- æ£€æŸ¥æ–‡ä»¶æ ¼å¼ï¼ˆå¿…é¡»æ˜¯.xlsxï¼‰
- ç¡®è®¤æ–‡ä»¶å¤§å°ï¼ˆ<10MBï¼‰
- æŸ¥çœ‹åç«¯æ—¥å¿—

### 4. è¡¨æ ¼ç¼–è¾‘æ— å“åº”
- ç¡®è®¤ç”¨æˆ·æœ‰ ITEM_WRITE æƒé™
- æ£€æŸ¥ç‰ˆæœ¬çŠ¶æ€ï¼ˆDRAFTæ‰å¯ç¼–è¾‘ï¼‰
- åˆ·æ–°é¡µé¢é‡è¯•

---

## ğŸ“¦ æ„å»ºéƒ¨ç½²

### å¼€å‘ç¯å¢ƒ
```bash
npm run dev
```

### ç”Ÿäº§æ„å»º
```bash
npm run build
```

ç”Ÿæˆæ–‡ä»¶åœ¨ `dist/` ç›®å½•

### Nginxé…ç½®ç¤ºä¾‹
```nginx
server {
    listen 38443;
    server_name localhost;
    
    location / {
        root /path/to/cost-frontend-react/dist;
        try_files $uri $uri/ /index.html;
    }
    
    location /api {
        proxy_pass http://localhost:31943;
    }
}
```

---

## ğŸ“ å­¦ä¹ èµ„æº

- Tailwind CSS: https://tailwindcss.com
- React Router: https://reactrouter.com
- Lucide Icons: https://lucide.dev
- ç³»ç»ŸUIè§„èŒƒ: `docs/Frontend-UI-Global-Standard.md`
- APIæ¸…å•: `docs/åç«¯APIåŠŸèƒ½æ¸…å•.md`

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
1. `docs/å‰ç«¯é—®é¢˜æ’æŸ¥æŒ‡å—.md`
2. `docs/ç³»ç»Ÿç®¡ç†UIå®ç°æ€»ç»“.md`
3. é¡¹ç›®README.md

**Reactå‰ç«¯å·²100%å®Œæˆæ ¸å¿ƒåŠŸèƒ½ï¼** ğŸ‰



---


## æ¥æºï¼šå‰ç«¯éƒ¨ç½²è¯´æ˜.md

# å·¥ç¨‹æˆæœ¬è®¡åˆ’ä¸ç¨åŠ¡è®¡æ§ç³»ç»Ÿ - Reactå‰ç«¯

## å½“å‰éƒ¨ç½²è¯´æ˜

### å‰ç«¯é€‰å‹
ç»è¿‡è¯„ä¼°ï¼Œå·²é‡‡ç”¨**åŸå§‹Reactè®¾è®¡**æ›¿ä»£Vueå‰ç«¯ï¼ŒåŸå› å¦‚ä¸‹ï¼š

1. **UIå®Œå…¨ç¬¦åˆéœ€æ±‚** - åŸå§‹è®¾è®¡å³ä¸ºå·¥ç¨‹å·¥ä½œå°é£æ ¼ï¼ˆé«˜å¯†åº¦è¡¨æ ¼ã€ä¸“ä¸šå…‹åˆ¶ï¼‰
2. **å¤šç«¯æ”¯æŒå®Œæ•´** - å·²å†…ç½®PC/Pad/Mobileå“åº”å¼é€‚é…
3. **å®ç°é€Ÿåº¦æœ€å¿«** - æ— éœ€é‡æ–°è®¾è®¡UIï¼Œç›´æ¥å¯¹æ¥åç«¯APIå³å¯
4. **ç»´æŠ¤æˆæœ¬æ›´ä½** - å•ä¸€å‰ç«¯æŠ€æœ¯æ ˆï¼Œé¿å…Vue/ReactåŒç»´æŠ¤

### ç›®å½•ç»“æ„
```
cost-system/
â”œâ”€â”€ cost-backend/          # Javaåç«¯
â”œâ”€â”€ cost-frontend-react/   # Reactå‰ç«¯ï¼ˆç”Ÿäº§ä½¿ç”¨ï¼‰
â”œâ”€â”€ cost-frontend/         # Vueå‰ç«¯ï¼ˆå·²åºŸå¼ƒï¼‰
â”œâ”€â”€ å·¥ç¨‹æˆæœ¬è®¡åˆ’ä¸ç¨åŠ¡è®¡æ§ç³»ç»Ÿ/ # åŸå§‹Reactè®¾è®¡ï¼ˆæ¨¡æ¿ï¼‰
â””â”€â”€ docs/                  # æ–‡æ¡£
```

### å¿«é€Ÿå¯åŠ¨

#### æ–¹å¼ä¸€ï¼šè‡ªåŠ¨å¯åŠ¨ï¼ˆæ¨èï¼‰
åŒå‡»è¿è¡Œï¼š
```
start-frontend-react.bat
```

#### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å¯åŠ¨
```bash
cd cost-frontend-react
npm install
npm run dev
```

è®¿é—®: **http://localhost:38443**

### ç™»å½•è´¦å·
- ç”¨æˆ·å: `admin`
- å¯†ç : `password`

### æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: React 19 + TypeScript
- **æ„å»º**: Vite 6
- **è·¯ç”±**: React Router 7
- **æ ·å¼**: Tailwind CSS 3
- **å›¾æ ‡**: Lucide React
- **Excel**: XLSX

### å¤šç«¯æ”¯æŒ
âœ… **PCç«¯**: å®Œæ•´å·¥ä½œå°ä½“éªŒï¼ˆé«˜å¯†åº¦è¡¨æ ¼ã€è¡Œå†…ç¼–è¾‘ï¼‰  
âœ… **Padç«¯**: è¡¨æ ¼ + æŠ½å±‰ç¼–è¾‘æ¨¡å¼  
âœ… **Mobileç«¯**: åˆ—è¡¨ + è¯¦æƒ…é¡µæ¨¡å¼

### UIç‰¹ç‚¹
- æ·±è‰²å·¦ä¾§å¯¼èˆªï¼ˆä¸“ä¸šå·¥ç¨‹é£æ ¼ï¼‰
- é«˜å¯†åº¦æ•°æ®è¡¨æ ¼ï¼ˆ36-40pxè¡Œé«˜ï¼‰
- å…‹åˆ¶çš„è§†è§‰è®¾è®¡ï¼ˆ4pxåœ†è§’ã€æå¼±é˜´å½±ï¼‰
- å·¥ä½œå°å¸ƒå±€ï¼ˆHeader + LeftNav + Mainï¼‰
- çŠ¶æ€é©±åŠ¨äº¤äº’ï¼ˆè‰ç¨¿/å®¡æ‰¹ä¸­/å·²ç­¾å‘ï¼‰

### å¼€å‘è¿›åº¦
âœ… é¡¹ç›®ç»“æ„åˆ›å»º  
âœ… APIæœåŠ¡å°è£…  
âœ… ç™»å½•é¡µé¢ï¼ˆå·²å¯¹æ¥åç«¯ï¼‰  
âœ… é¡¹ç›®åˆ—è¡¨ï¼ˆå·²å¯¹æ¥åç«¯ï¼‰  
â³ é¡¹ç›®è¯¦æƒ…  
â³ ç‰ˆæœ¬å·¥ä½œå°  
â³ æ˜ç»†è¡¨æ ¼ï¼ˆLineItemTableï¼‰  
â³ Excelå¯¼å…¥å¯¼å‡º  
â³ æŒ‡æ ‡çœ‹æ¿ä¸è¿½æº¯

### åç«¯è¦æ±‚
ç¡®ä¿åç«¯æœåŠ¡å·²å¯åŠ¨ï¼š
- åœ°å€: `http://localhost:31943`
- æ•°æ®åº“: `cost_system`
- æµ‹è¯•æ•°æ®å·²åˆå§‹åŒ–

### ç›¸å…³æ–‡æ¡£
- [Reactå‰ç«¯ä½¿ç”¨è¯´æ˜](./Reactå‰ç«¯ä½¿ç”¨è¯´æ˜.md)
- [å‰ç«¯UIé‡æ„æ–¹æ¡ˆ](./å‰ç«¯UIé‡æ„æ–¹æ¡ˆ.md)
- [Frontend-UI-Global-Standard](./Frontend-UI-Global-Standard.md)

### ä¸‹ä¸€æ­¥è®¡åˆ’
1. å®ŒæˆAPIå¯¹æ¥ï¼ˆé¡¹ç›®è¯¦æƒ…ã€ç‰ˆæœ¬ã€æ˜ç»†ï¼‰
2. å®ç°æ ¸å¿ƒLineItemTableç»„ä»¶
3. å®ç°Excelå¯¼å…¥åŠŸèƒ½ï¼ˆæ”¯æŒçº¿è·¯å·¥ç¨‹-æˆæœ¬è®¡åˆ’å•.xlsxï¼‰
4. å®Œå–„æŒ‡æ ‡çœ‹æ¿ä¸è¿½æº¯
5. å¤šç«¯æµ‹è¯•ä¸ä¼˜åŒ–

---
**æ³¨æ„**: Vueå‰ç«¯ï¼ˆcost-frontend/ï¼‰å·²åœæ­¢å¼€å‘ï¼Œè¯·ä½¿ç”¨Reactå‰ç«¯ï¼ˆcost-frontend-react/ï¼‰ã€‚



---


## æ¥æºï¼šDEPLOYMENT.md

# å¿«é€Ÿéƒ¨ç½²æŒ‡å—

## Docker éƒ¨ç½²ï¼ˆæ¨èï¼‰

### 1. å‡†å¤‡ç¯å¢ƒ

ç¡®ä¿å·²å®‰è£… Docker å’Œ Docker Compose:
```bash
docker --version
docker-compose --version
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œä¿®æ”¹ä»¥ä¸‹å…³é”®é…ç½®
vi .env
```

**å¿…é¡»ä¿®æ”¹çš„é…ç½®**:
- `MYSQL_ROOT_PASSWORD` - MySQL å¯†ç 
- `REDIS_PASSWORD` - Redis å¯†ç 
- `JWT_SECRET` - JWT å¯†é’¥ï¼ˆè‡³å°‘64å­—ç¬¦ï¼‰
- `SPRING_SECURITY_PASSWORD` - ç®¡ç†å‘˜å¯†ç 

**ç”Ÿæˆå®‰å…¨å¯†é’¥**:
```bash
# ç”Ÿæˆ MySQL å¯†ç 
openssl rand -base64 32

# ç”Ÿæˆ Redis å¯†ç 
openssl rand -base64 32

# ç”Ÿæˆ JWT Secret
openssl rand -base64 64
```

### 3. ä¸€é”®éƒ¨ç½²

**Linux/macOS**:
```bash
chmod +x deploy-docker.sh
./deploy-docker.sh
```

**Windows**:
```bash
deploy-docker.bat
```

**æˆ–æ‰‹åŠ¨éƒ¨ç½²**:
```bash
# æ„å»ºé•œåƒ
docker-compose build --no-cache

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

### 4. éªŒè¯éƒ¨ç½²

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps

# æ£€æŸ¥åç«¯å¥åº·
curl http://localhost:31943/actuator/health

# è®¿é—®å‰ç«¯
# æµè§ˆå™¨æ‰“å¼€: http://localhost:38443
```

### 5. é»˜è®¤è´¦å·

- **ç”¨æˆ·å**: admin
- **å¯†ç **: Admin@123ï¼ˆé¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹ï¼‰

---

## ä¼ ç»Ÿéƒ¨ç½²

### 1. å®‰è£…ä¾èµ–

```bash
# CentOS/RHEL
sudo yum install -y java-17-openjdk mysql-server redis nginx

# Ubuntu/Debian
sudo apt-get install -y openjdk-17-jdk mysql-server redis-server nginx
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

```bash
# åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶
sudo vi /etc/profile.d/cost-system.sh

# æ·»åŠ é…ç½®ï¼ˆå‚è€ƒ .env.exampleï¼‰
export SPRING_DATASOURCE_URL="jdbc:mysql://localhost:3306/cost_system"
export SPRING_DATASOURCE_USERNAME="cost_admin"
export SPRING_DATASOURCE_PASSWORD="your_password"
# ... å…¶ä»–é…ç½®

# åŠ è½½ç¯å¢ƒå˜é‡
source /etc/profile.d/cost-system.sh
```

### 3. åˆå§‹åŒ–æ•°æ®åº“

```bash
# åˆ›å»ºæ•°æ®åº“
mysql -u root -p -e "CREATE DATABASE cost_system DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"

# æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬
mysql -u root -p cost_system < deploy/mysql-init.sql
```

### 4. éƒ¨ç½²åç«¯

```bash
# æ‰“åŒ…
cd cost-backend
mvn clean package -DskipTests -Pprod

# éƒ¨ç½²
sudo mkdir -p /opt/cost-system
sudo cp target/cost-backend-*.jar /opt/cost-system/cost-backend.jar

# åˆ›å»º systemd æœåŠ¡ï¼ˆå‚è€ƒéƒ¨ç½²æ‰‹å†Œï¼‰
sudo vi /etc/systemd/system/cost-backend.service

# å¯åŠ¨æœåŠ¡
sudo systemctl daemon-reload
sudo systemctl start cost-backend
sudo systemctl enable cost-backend
```

### 5. éƒ¨ç½²å‰ç«¯

```bash
# æ„å»º
cd cost-frontend-react
npm install
npm run build

# éƒ¨ç½²
sudo mkdir -p /var/www/cost-system
sudo cp -r dist/* /var/www/cost-system/

# é…ç½® Nginxï¼ˆå‚è€ƒéƒ¨ç½²æ‰‹å†Œï¼‰
sudo vi /etc/nginx/conf.d/cost-system.conf

# å¯åŠ¨ Nginx
sudo nginx -t
sudo systemctl restart nginx
sudo systemctl enable nginx
```

---

## å¸¸ç”¨å‘½ä»¤

### Docker éƒ¨ç½²

```bash
# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f backend

# é‡å¯æœåŠ¡
docker-compose restart backend

# åœæ­¢æœåŠ¡
docker-compose stop

# æ›´æ–°æœåŠ¡
git pull
docker-compose build --no-cache
docker-compose up -d

# å¤‡ä»½æ•°æ®åº“
docker exec cost-mysql mysqldump -uroot -p${MYSQL_ROOT_PASSWORD} cost_system | gzip > backup_$(date +%Y%m%d).sql.gz
```

### ä¼ ç»Ÿéƒ¨ç½²

```bash
# æŸ¥çœ‹åç«¯æ—¥å¿—
sudo journalctl -u cost-backend -f

# é‡å¯åç«¯
sudo systemctl restart cost-backend

# é‡å¯ Nginx
sudo systemctl restart nginx

# å¤‡ä»½æ•°æ®åº“
mysqldump -u root -p cost_system | gzip > backup_$(date +%Y%m%d).sql.gz
```

---

## æ•…éšœæ’æŸ¥

### åç«¯æ— æ³•å¯åŠ¨

```bash
# æŸ¥çœ‹æ—¥å¿—
docker-compose logs backend
# æˆ–
sudo journalctl -u cost-backend -n 100

# æ£€æŸ¥æ•°æ®åº“è¿æ¥
docker exec -it cost-mysql mysql -uroot -p${MYSQL_ROOT_PASSWORD} -e "SELECT 1;"
```

### å‰ç«¯æ— æ³•è®¿é—®

```bash
# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker-compose ps

# æ£€æŸ¥ç«¯å£
netstat -tunlp | grep 38443

# æµ‹è¯•åç«¯è¿æ¥
curl http://localhost:31943/actuator/health
```

### æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥

```bash
# é‡æ–°åˆå§‹åŒ–
docker-compose down -v
docker-compose up -d

# æ‰‹åŠ¨æ‰§è¡Œ SQL
docker exec -i cost-mysql mysql -uroot -p${MYSQL_ROOT_PASSWORD} cost_system < deploy/mysql-init.sql
```

---

## å®‰å…¨å»ºè®®

1. âœ… ä¿®æ”¹æ‰€æœ‰é»˜è®¤å¯†ç 
2. âœ… ä½¿ç”¨å¼ºéšæœºå¯†é’¥ï¼ˆè‡³å°‘32å­—ç¬¦ï¼‰
3. âœ… ä¸è¦å°† `.env` æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
4. âœ… å®šæœŸå¤‡ä»½æ•°æ®åº“
5. âœ… é…ç½®é˜²ç«å¢™è§„åˆ™
6. âœ… å¯ç”¨ HTTPSï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
7. âœ… å®šæœŸæ›´æ–°ç³»ç»Ÿå’Œä¾èµ–

---

## æ›´å¤šä¿¡æ¯

è¯¦ç»†éƒ¨ç½²æ–‡æ¡£è¯·å‚è€ƒ:
- [ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ‰‹å†Œ](deploy/ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ‰‹å†Œ.md)
- [Docker éƒ¨ç½²æŒ‡å—](docs/Docker-Deployment-Guide.md)
- [æ•°æ®åº“éƒ¨ç½²æ–¹æ¡ˆ](deploy/æ•°æ®åº“éƒ¨ç½²æ–¹æ¡ˆ.md)

æŠ€æœ¯æ”¯æŒ: è¯·æä¾›é”™è¯¯æ—¥å¿—å’Œç³»ç»Ÿä¿¡æ¯
