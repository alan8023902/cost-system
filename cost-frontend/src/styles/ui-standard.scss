@import './variables.scss';

// ============================================================
// Global Mixins & Breakpoints
// ============================================================

$breakpoint-mobile: 768px;
$breakpoint-pad: 1024px;

@mixin mobile {
  @media (max-width: #{$breakpoint-mobile}) {
    @content;
  }
}

@mixin pad {
  @media (max-width: #{$breakpoint-pad}) {
    @content;
  }
}

// ============================================================
// Global Reset & Typography
// ============================================================

html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: #f4f6f8; // Match CSS var --ui-bg-page
  color: $text-primary;
  font-size: 14px;
}

#app {
  height: 100%;
}

// ============================================================
// Layout Utilities
// ============================================================

.flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

.flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.text-ellipsis {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// Spacing Utilities (8px scale)
@for $i from 1 through 10 {
  .mt-#{$i * 8} { margin-top: #{$i * 8}px !important; }
  .mb-#{$i * 8} { margin-bottom: #{$i * 8}px !important; }
  .ml-#{$i * 8} { margin-left: #{$i * 8}px !important; }
  .mr-#{$i * 8} { margin-right: #{$i * 8}px !important; }
  .pt-#{$i * 8} { padding-top: #{$i * 8}px !important; }
  .pb-#{$i * 8} { padding-bottom: #{$i * 8}px !important; }
  .pl-#{$i * 8} { padding-left: #{$i * 8}px !important; }
  .pr-#{$i * 8} { padding-right: #{$i * 8}px !important; }
}

// ============================================================
// Component Overrides (Element Plus)
// ============================================================

// High Density & 4px Radius
:root {
  --el-border-radius-base: 4px;
  --el-color-primary: #{$primary-500};
  --el-color-success: #{$success-500};
  --el-color-warning: #{$warning-500};
  --el-color-danger: #{$danger-500};
}

.el-button {
  font-weight: 500;
  border-radius: 4px;
  
  &--small {
    padding: 5px 11px;
    font-size: 12px;
  }
}

.el-card {
  border-radius: 4px;
  border: 1px solid $border-light;
  box-shadow: $shadow-xs !important;
  
  &__header {
    padding: 12px 16px;
    border-bottom: 1px solid $border-light;
    font-weight: 600;
    font-size: 14px;
    background-color: $neutral-50;
  }
  
  &__body {
    padding: 16px;
  }
}

.el-table {
  --el-table-header-bg-color: #{$neutral-50};
  --el-table-row-hover-bg-color: #{$primary-50};
  font-size: 13px; // High density font
  
  th.el-table__cell {
    font-weight: 600;
    color: $text-secondary;
    height: 40px; // Dense header
    padding: 4px 0;
  }
  
  td.el-table__cell {
    height: 40px; // Dense row
    padding: 4px 0;
  }

  .cell {
    line-height: 1.4;
  }
}

.el-dialog {
  border-radius: 4px;
  box-shadow: $shadow-lg;
  
  @include mobile {
    width: 90% !important;
    margin-top: 10vh !important;
  }
  
  &__header {
    padding: 16px 24px;
    border-bottom: 1px solid $border-light;
    margin-right: 0;
  }
  
  &__body {
    padding: 24px;
  }
  
  &__footer {
    padding: 16px 24px;
    border-top: 1px solid $border-light;
  }
}

// ============================================================
// Page Layout Structures
// ============================================================

.page-container {
  padding: 24px;
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;

  @include mobile {
    padding: 12px;
  }
}

.page-header {
  margin-bottom: 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;

  @include mobile {
    flex-direction: column;
    align-items: stretch;
    gap: 12px;
    
    .flex-center {
      justify-content: space-between;
    }
    
    // Ensure buttons take full width or logical placement
    .el-button {
      width: 100%;
      margin-left: 0 !important;
      margin-top: 8px;
    }
  }

  h1 {
    font-size: 20px;
    font-weight: 600;
    color: $text-primary;
    margin: 0;
  }
}

.font-mono {
  font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;
}

.page-content {
  flex: 1;
  overflow: auto;
  background: white;
  border-radius: 4px;
  box-shadow: $shadow-sm;
  padding: 16px;
}

// ============================================================
// Responsive Helpers
// ============================================================

.hidden-xs {
  @include mobile {
    display: none !important;
  }
}

.visible-xs {
  display: none !important;
  @include mobile {
    display: block !important;
  }
}

.responsive-table {
  width: 100%;
  overflow-x: auto;
  
  // Make table card-like on mobile if needed, 
  // but for now just ensuring horizontal scroll works
  .el-table__body-wrapper {
    overflow-x: auto;
  }
}
